(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5113:function(e,t,a){Promise.resolve().then(a.bind(a,6097))},6097:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(7437),s=a(2265),n=a(3141);a(8128),a(4840);let i={AI_ENABLED:!0,DISABLED_MESSAGE:"StudySpark AI is currently offline for maintenance. Please try again later.",DISABLED_TITLE:"AI Temporarily Unavailable",MAINTENANCE_MODE:!1,MAINTENANCE_MESSAGE:"We're upgrading our AI system to serve you better. Back soon!"},c=()=>i.AI_ENABLED&&!i.MAINTENANCE_MODE,l=()=>i.MAINTENANCE_MODE?i.MAINTENANCE_MESSAGE:i.DISABLED_MESSAGE,o=()=>i.DISABLED_TITLE;function d(){(0,s.useEffect)(()=>{(async()=>{try{let e=await a.e(438).then(a.t.bind(a,438,23));e.default&&"function"==typeof e.default&&e.default()}catch(e){console.error("Security script failed to load:",e)}})()},[]);let e=c(),[t,i]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[p,m]=(0,s.useState)(!1),[f,h]=(0,s.useState)(!0),[y,x]=(0,s.useState)(!1),g=(0,s.useRef)(null),j=(0,s.useRef)(null),v=()=>{setTimeout(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},100)};(0,s.useEffect)(()=>{v()},[t]),(0,s.useEffect)(()=>{p||v()},[p]),(0,s.useEffect)(()=>{!d&&j.current&&(j.current.style.height="54px")},[d]),(0,s.useEffect)(()=>{(async()=>{await new Promise(e=>setTimeout(e,2500)),i([{id:1,type:"ai",content:'<div class="ai-response-content"><p>Hello! I am your StudySpark AI assistant. Ask me any academic question and I will help you understand it better! \uD83D\uDCDA</p></div>',timestamp:new Date,isHtml:!0}]),x(!0),setTimeout(()=>{h(!1),x(!1)},1200),setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},1300)})()},[]);let N=async e=>{if(e.preventDefault(),!d.trim()||p)return;let t={id:Date.now(),type:"user",content:d.trim(),timestamp:new Date};i(e=>[...e,t]),u(""),m(!0);try{let e=await fetch("/api/bot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t.content})}),a=await e.json();if(a.success&&a.data){let e={id:Date.now()+1,type:"ai",content:a.data.content,timestamp:new Date,metadata:a.data.metadata,isHtml:!0};i(t=>[...t,e])}else{let e={id:Date.now()+1,type:"ai",content:a.error||"Sorry, I couldn't process your request at the moment. Please try again later.",timestamp:new Date,isError:!0};i(t=>[...t,e])}m(!1)}catch(t){console.error("Chat error:",t);let e={id:Date.now()+1,type:"ai",content:"âŒ Sorry, I encountered an error. Please try again in a moment.",timestamp:new Date,isError:!0};i(t=>[...t,e]),m(!1)}},M=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),b=e=>e?e.replace(/\n\s*\n\s*\n+/g,"\n\n").replace(/\s*<\/(h[1-6]|p|strong)>\s*/g,"</$1>").replace(/\s*<(h[1-6]|p|strong)([^>]*)>\s*/g,"<$1$2>").replace(/\s*---\s*/g,"\n---\n").replace(/[ \t]+/g," ").replace(/[ \t]+\n/g,"\n").split(/(\\\[[\s\S]*?\\\]|\\\([\s\S]*?\\\))/).map((e,t)=>{if(e.startsWith("\\[")){let a=e.replace(/^\\\[/,"").replace(/\\\]$/,"").trim();try{let e=a.replace(/\\frac\{([^}]+)\}\{([^}]+)\}/g,"\\frac{$1}{$2}").replace(/([0-9]+)\/([0-9]+)/g,"\\frac{$1}{$2}").trim();return(0,r.jsx)("div",{style:{margin:"1rem 0",textAlign:"center",color:"white"},children:(0,r.jsx)(n.BlockMath,{math:e})},t)}catch(e){return console.error("LaTeX Block Error:",e),(0,r.jsx)("div",{style:{color:"white",padding:"10px",textAlign:"center",border:"1px solid #444"},children:a.replace(/\\frac\{([^}]+)\}\{([^}]+)\}/g,"($1)/($2)")},t)}}else if(e.startsWith("\\(")){let a=e.replace(/^\\\(/,"").replace(/\\\)$/,"").trim();try{return(0,r.jsx)(n.InlineMath,{math:a},t)}catch(e){return console.error("LaTeX Inline Error:",e),(0,r.jsxs)("span",{style:{color:"red"},children:["LaTeX Error: ",a]},t)}}else{if(e.includes("<")){let a=e.replace(/<h([1-6])([^>]*)>/g,'<h$1$2 style="margin:0.8rem 0 0.4rem 0;line-height:1.3;">').replace(/<p([^>]*)>/g,'<p$1 style="margin:0.3rem 0;line-height:1.5;">').replace(/<strong([^>]*)>/g,'<strong$1 style="margin:0.1rem 0;">').replace(/\n\s*\n/g,"\n").trim();return(0,r.jsx)("div",{style:{margin:"0.3rem 0"},dangerouslySetInnerHTML:{__html:a}},t)}if(""===e.trim())return null;{let a=e.split("\n");return a.map((e,s)=>""===e.trim()?(0,r.jsx)("br",{},"".concat(t,"-").concat(s)):(0,r.jsxs)("span",{children:[e,s<a.length-1&&""!==e.trim()&&(0,r.jsx)("br",{})]},"".concat(t,"-").concat(s)))}}}):null;return(0,r.jsxs)("div",{className:"chat-container",children:[(0,r.jsx)("header",{className:"chat-header",children:(0,r.jsx)("div",{className:"header-content",children:(0,r.jsxs)("div",{className:"logo-section",children:[(0,r.jsx)("div",{className:"logo-icon",children:(0,r.jsx)("img",{src:"https://kxwuhxbuurfivsvbbzyq.supabase.co/storage/v1/object/sign/spark/sparkai.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV84ZjViZTUwMS02M2FjLTQxMjMtOGJhNC03OTU0ZWY4ODA3NmMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzcGFyay9zcGFya2FpLmpwZyIsImlhdCI6MTc1ODk1MzQxNCwiZXhwIjozMTUzNjE3Mjc0MTc0MTR9.dDfYMx2L50ff-3fx5nQSZUoywuB4-v7Fx7VSk6OF9IY",alt:"StudySpark AI",className:"logo-image"})}),(0,r.jsxs)("div",{className:"logo-text",children:[(0,r.jsx)("h1",{children:"StudySpark AI"}),(0,r.jsx)("p",{children:"Your Free AI Study Assistant"})]})]})})}),(0,r.jsx)("main",{className:"chat-messages",children:(0,r.jsxs)("div",{className:"messages-container",children:[t.map(e=>(0,r.jsxs)("div",{className:"message ".concat(e.type," ").concat(e.isError?"error":""),children:[(0,r.jsx)("div",{className:"message-avatar",children:"user"===e.type?(0,r.jsx)("i",{className:"fas fa-user"}):(0,r.jsx)("img",{src:"https://kxwuhxbuurfivsvbbzyq.supabase.co/storage/v1/object/sign/spark/sparkai.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV84ZjViZTUwMS02M2FjLTQxMjMtOGJhNC03OTU0ZWY4ODA3NmMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzcGFyay9zcGFya2FpLmpwZyIsImlhdCI6MTc1ODk1MzQxNCwiZXhwIjozMTUzNjE3Mjc0MTc0MTR9.dDfYMx2L50ff-3fx5nQSZUoywuB4-v7Fx7VSk6OF9IY",alt:"StudySpark AI",className:"avatar-image"})}),(0,r.jsxs)("div",{className:"message-content",children:[(0,r.jsx)("div",{className:"message-text",children:"ai"===e.type?(0,r.jsx)("div",{className:"ai-message-content",children:b(e.content)}):(0,r.jsx)("div",{className:"user-message-content",children:e.content})}),(0,r.jsx)("div",{className:"message-time",children:M(e.timestamp)})]})]},e.id)),p&&(0,r.jsxs)("div",{className:"message ai loading",children:[(0,r.jsx)("div",{className:"message-avatar",children:(0,r.jsx)("img",{src:"https://kxwuhxbuurfivsvbbzyq.supabase.co/storage/v1/object/sign/spark/sparkai.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV84ZjViZTUwMS02M2FjLTQxMjMtOGJhNC03OTU0ZWY4ODA3NmMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzcGFyay9zcGFya2FpLmpwZyIsImlhdCI6MTc1ODk1MzQxNCwiZXhwIjozMTUzNjE3Mjc0MTc0MTR9.dDfYMx2L50ff-3fx5nQSZUoywuB4-v7Fx7VSk6OF9IY",alt:"StudySpark AI",className:"avatar-image"})}),(0,r.jsx)("div",{className:"message-content",children:(0,r.jsxs)("div",{className:"typing-indicator",children:[(0,r.jsx)("span",{}),(0,r.jsx)("span",{}),(0,r.jsx)("span",{})]})})]}),(0,r.jsx)("div",{ref:g})]})}),(0,r.jsx)("footer",{className:"chat-input",children:e?(0,r.jsx)("form",{onSubmit:N,className:"input-form",children:(0,r.jsxs)("div",{className:"input-container",children:[(0,r.jsx)("textarea",{ref:j,value:d,onChange:e=>{let t=e.target;u(t.value),t.style.height="auto";let a=Math.min(Math.max(t.scrollHeight,54),120);t.style.height=a+"px"},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N(e))},placeholder:f?"Initializing AI...":"Ask me anything about your studies...",className:"message-input",rows:"1",disabled:p||f}),(0,r.jsx)("button",{type:"submit",className:"send-button",disabled:!d.trim()||p||f,children:p?(0,r.jsx)("div",{className:"spinner"}):(0,r.jsx)("i",{className:"fas fa-paper-plane"})})]})}):(0,r.jsx)("div",{className:"ai-disabled-container",children:(0,r.jsxs)("div",{className:"ai-disabled-message",children:[(0,r.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,r.jsx)("h3",{children:o()}),(0,r.jsx)("p",{children:l()})]})})}),(0,r.jsxs)("div",{className:"chat-background",children:[(0,r.jsx)("div",{className:"bg-gradient"}),(0,r.jsxs)("div",{className:"floating-particles",children:[(0,r.jsx)("div",{className:"particle"}),(0,r.jsx)("div",{className:"particle"}),(0,r.jsx)("div",{className:"particle"}),(0,r.jsx)("div",{className:"particle"}),(0,r.jsx)("div",{className:"particle"})]})]}),f&&(0,r.jsx)("div",{className:"initialization-overlay ".concat(y?"fade-out":""),children:(0,r.jsxs)("div",{className:"initialization-container",children:[(0,r.jsxs)("div",{className:"initialization-spinner",children:[(0,r.jsx)("div",{className:"spinner-circle"}),(0,r.jsx)("img",{src:"https://kxwuhxbuurfivsvbbzyq.supabase.co/storage/v1/object/sign/spark/sparkai.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV84ZjViZTUwMS02M2FjLTQxMjMtOGJhNC03OTU0ZWY4ODA3NmMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzcGFyay9zcGFya2FpLmpwZyIsImlhdCI6MTc1ODk1MzQxNCwiZXhwIjozMTUzNjE3Mjc0MTc0MTR9.dDfYMx2L50ff-3fx5nQSZUoywuB4-v7Fx7VSk6OF9IY",alt:"StudySpark AI",className:"initialization-logo-image"})]}),(0,r.jsxs)("div",{className:"initialization-text",children:[(0,r.jsx)("h2",{children:"Initializing StudySpark AI..."}),(0,r.jsx)("p",{children:"Setting up your AI assistant"})]})]})})]})}},4840:function(){},8128:function(){},622:function(e,t,a){"use strict";var r=a(2265),s=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,a){var r,l={},o=null,d=null;for(r in void 0!==a&&(o=""+a),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,r)&&!c.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:s,type:e,key:o,ref:d,props:l,_owner:i.current}}t.jsx=l,t.jsxs=l},7437:function(e,t,a){"use strict";e.exports=a(622)},3018:function(e,t,a){"use strict";var r=a(1289);function s(){}function n(){}n.resetWarningCache=s,e.exports=function(){function e(e,t,a,s,n,i){if(i!==r){var c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:s};return a.PropTypes=a,a}},4275:function(e,t,a){e.exports=a(3018)()},1289:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3141:function(e,t,a){var r,s,n;n=function(e,t,a,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(e,{BlockMath:()=>d,InlineMath:()=>u}),t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=s?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}(t),a=s(a),r=s(r);let i=(e,{displayMode:s})=>{let n=({children:a,errorColor:n,math:i,renderError:c})=>{let l=null!=i?i:a,{html:o,error:d}=(0,t.useMemo)(()=>{try{return{html:r.default.renderToString(l,{displayMode:s,errorColor:n,throwOnError:!!c}),error:void 0}}catch(e){if(e instanceof r.default.ParseError||e instanceof TypeError)return{error:e};throw e}},[l,n,c]);return d?c?c(d):t.default.createElement(e,{html:`${d.message}`}):t.default.createElement(e,{html:o})};return n.propTypes={children:a.default.string,errorColor:a.default.string,math:a.default.string,renderError:a.default.func},n},c={html:a.default.string.isRequired},l=({html:e})=>t.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:e}});l.propTypes=c;let o=({html:e})=>t.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:e}});o.propTypes=c;let d=i(l,{displayMode:!0}),u=i(o,{displayMode:!1})},"object"==typeof e.exports?n(t,a(2265),a(4275),a(1463)):(r=[t,a(2265),a(4275),a(1463)],void 0===(s=n.apply(t,r))||(e.exports=s))}},function(e){e.O(0,[639,877,971,938,744],function(){return e(e.s=5113)}),_N_E=e.O()}]);